{"version":3,"sources":["tests/subscriptions.test.js"],"names":["describe","it","pubsub","PubSub","sqlInstance","subscriptions","Task","models","schema","document","ai","result","Promise","all","next","create","name","gqlResult","value","data","afterCreateTask","id","toEqual","task","update","afterUpdateTask","destroy","afterDestroyTask","modelTimeout","modelCount","taskModel","define","type","Sequelize","STRING","allowNull","before","params","resolve","reject","clearTimeout","setTimeout","undefined","err","console","log","options","tableName","hooks","instance","dialect","logging","sync","mutation","mutationResult","er"],"mappings":"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","file":"subscriptions.test.js","sourceRoot":"../../src/"}