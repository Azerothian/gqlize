{"version":3,"sources":["database.js"],"names":["global","Promise","Sequelize","log","connect","schemas","sqlInstance","options","loadSchemas","createSubscriptionHook","schema","hookName","subscriptionName","pubsub","schemaOptions","hooks","schemaHook","isSubHook","error","schemaHookName","f","instance","output","apply","err","debug","undefined","publish","schemaName","name","$sqlgql","defaultAttr","defaultModel","subscriptionHooks","subscriptions","Object","assign","sc","map","s","$subscriptions","reduce","data","hookFunc","names","classMethods","instanceMethods","test","version","define","models","prototype","getOriginalModel","createBind","keys","forEach","classMethod","instanceMethod","relationships","relationship","createRelationship","model","type","as","targetModel","sourceModel","through","source","target","rel","o","k"],"mappings":"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","file":"database.js","sourceRoot":"../src/"}