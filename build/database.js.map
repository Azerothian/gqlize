{"version":3,"sources":["database.js"],"names":["log","connect","schemas","sqlInstance","options","loadSchemas","createSubscriptionHook","schema","hookName","subscriptionName","pubsub","schemaOptions","hooks","schemaHook","isSubHook","error","schemaHookName","f","instance","apply","err","debug","undefined","output","publish","schemaName","name","$sqlgql","defaultAttr","defaultModel","subscriptionHooks","subscriptions","Object","assign","sc","map","s","$subscriptions","reduce","data","hookFunc","names","classMethods","instanceMethods","test","version","define","models","keys","forEach","classMethod","instanceMethod","prototype","relationships","relationship","createRelationship","model","type","as","targetModel","sourceModel","source","target","rel"],"mappings":"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","file":"database.js","sourceRoot":"../src/"}