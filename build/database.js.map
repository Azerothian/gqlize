{"version":3,"sources":["database.js"],"names":["log","connect","schemas","sqlInstance","options","loadSchemas","createSubscriptionHook","schema","hookName","subscriptionName","pubsub","schemaOptions","hooks","schemaHook","isSubHook","error","schemaHookName","f","instance","output","apply","err","debug","undefined","publish","schemaName","name","createHookQueue","init","reduce","promise","targetHooks","then","val","result","Array","isArray","hook","prevResult","Promise","resolve","generateHooks","o","h","Object","keys","forEach","$sqlgql","defaultAttr","defaultModel","subscriptionHooks","subscriptions","assign","sc","map","s","$subscriptions","data","hookFunc","names","push","beforeFind","findOptions","whereOperators","where","beforeCount","classMethods","instanceMethods","test","Sequelize","version","define","models","Error","prototype","getOriginalModel","createBind","classMethod","instanceMethod","relationships","relationship","createRelationship","model","type","as","targetModel","sourceModel","through","source","target","rel","k"],"mappings":"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","file":"database.js","sourceRoot":"../src/"}