{"version":3,"sources":["database.js"],"names":["connect","createSubscriptionHook","loadSchemas","log","schemas","sqlInstance","options","schema","hookName","subscriptionName","pubsub","schemaOptions","hooks","schemaHook","isSubHook","error","schemaHookName","f","instance","apply","debug","err","undefined","publish","schemaName","name","$sqlgql","defaultAttr","defaultModel","subscriptionHooks","subscriptions","Object","assign","sc","map","s","$subscriptions","reduce","data","hookFunc","names","classMethods","instanceMethods","test","version","define","models","keys","forEach","classMethod","instanceMethod","prototype","relationships","relationship","createRelationship","model","type","as","targetModel","sourceModel","source","target","rel"],"mappings":"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","file":"database.js","sourceRoot":"../src/"}