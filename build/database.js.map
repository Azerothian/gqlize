{"version":3,"sources":["database.js"],"names":["global","Promise","Sequelize","log","connect","schemas","sqlInstance","options","loadSchemas","createSubscriptionHook","schema","hookName","subscriptionName","pubsub","schemaOptions","hooks","schemaHook","isSubHook","error","schemaHookName","f","instance","output","apply","err","debug","undefined","publish","schemaName","name","createHookQueue","init","reduce","promise","targetHooks","then","val","result","resolve","generateHooks","o","h","Object","keys","forEach","$sqlgql","defaultAttr","defaultModel","subscriptionHooks","subscriptions","assign","sc","map","s","$subscriptions","data","hookFunc","names","push","beforeFind","findOptions","whereOperators","where","classMethods","instanceMethods","test","version","define","models","prototype","getOriginalModel","createBind","classMethod","instanceMethod","relationships","relationship","createRelationship","model","type","as","targetModel","sourceModel","through","source","target","rel","k"],"mappings":"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","file":"database.js","sourceRoot":"../src/"}