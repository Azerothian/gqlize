{"version":3,"sources":["database.js"],"names":["connect","createSubscriptionHook","loadSchemas","log","schemas","sqlInstance","options","schema","hookName","subscriptionName","pubsub","schemaOptions","instance","hooks","schemaHook","apply","err","debug","undefined","publish","$sqlgql","defaultAttr","defaultModel","subscriptionHooks","subscriptions","Object","assign","forEach","$subscriptions","reduce","data","name","hookFunc","names","classMethods","instanceMethods","test","version","define","models","keys","classMethod","instanceMethod","prototype","relationships","relationship","createRelationship","model","type","as","targetModel","sourceModel","source","target","rel","error"],"mappings":"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","file":"database.js","sourceRoot":"../src/"}