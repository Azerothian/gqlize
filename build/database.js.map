{"version":3,"sources":["database.js"],"names":["connect","createSubscriptionHook","loadSchemas","log","schemas","sqlInstance","options","schema","hookName","subscriptionName","pubsub","schemaOptions","instance","hooks","schemaHook","apply","debug","err","undefined","publish","$sqlgql","defaultAttr","defaultModel","subscriptionHooks","subscriptions","Object","assign","forEach","$subscriptions","reduce","data","name","hookFunc","names","classMethods","instanceMethods","test","version","define","models","keys","classMethod","instanceMethod","prototype","relationships","relationship","createRelationship","model","type","as","targetModel","sourceModel","source","target","rel","error"],"mappings":"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","file":"database.js","sourceRoot":"../src/"}