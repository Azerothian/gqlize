{"version":3,"sources":["graphql/mutation/create-functions.js"],"names":["onCreate","targetModel","modelDefinition","source","args","context","info","input","override","Object","keys","reduce","data","fieldName","before","params","type","events","MUTATION_CREATE","foreignKeys","fieldRawAttributesMap","filter","k","references","length","forEach","fk","id","model","create","rootValue","assign","transaction","after","result","onUpdate","Error","testField","undefined","MUTATION_UPDATE","update","onDelete","MUTATION_DELETE","destroy","createFunctions","models","typeCollection","mutationInputTypes","options","promise","modelName","then","o","createFunctionForModel","Promise","resolve","createProcessRelationships","relationships","all","map","relName","output","relationship","assoc","associations","mutationFunctions","command","createArgs","updateVars","foreignKey","targetKey","push","item","get","sourceKey","updateArgs","where","and","permission","mutation","optional","required","fields","funcs","updateResult","deleteResult","createResult","mutationUpdate","mutationDelete","mutationCreate","processRelationships","GraphQLList","createFunc","afterList","afterUpdateList","GraphQLInputObjectType","name","GraphQLNonNull","afterDeleteList","delete"],"mappings":"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","file":"create-functions.js","sourceRoot":"../../../src/"}