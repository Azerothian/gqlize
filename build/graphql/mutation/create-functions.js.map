{"version":3,"sources":["graphql/mutation/create-functions.js"],"names":["onCreate","targetModel","modelDefinition","source","args","context","info","input","override","Object","keys","reduce","data","fieldName","before","params","type","events","MUTATION_CREATE","model","create","rootValue","assign","transaction","after","result","onUpdate","Error","MUTATION_UPDATE","update","onDelete","MUTATION_DELETE","destroy","createFunctions","models","typeCollection","mutationInputTypes","options","promise","modelName","then","o","createFunctionForModel","Promise","resolve","createProcessRelationships","relationships","all","map","relName","output","relationship","assoc","associations","mutationFunctions","item","command","createArgs","foreignKey","get","sourceKey","push","updateArgs","where","and","permission","mutation","undefined","optional","required","fields","funcs","updateResult","deleteResult","createResult","mutationUpdate","mutationDelete","mutationCreate","processRelationships","GraphQLList","createFunc","afterList","afterUpdateList","GraphQLInputObjectType","name","GraphQLNonNull","afterDeleteList","delete"],"mappings":"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","file":"create-functions.js","sourceRoot":"../../../src/"}