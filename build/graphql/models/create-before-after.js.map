{"version":3,"sources":["graphql/models/create-before-after.js"],"names":["createBeforeAfter","model","options","hooks","targetBeforeFuncs","targetAfterFuncs","after","concat","modelDefinition","primaryKeys","Object","keys","fieldRawAttributesMap","filter","k","primaryKey","foreignKeys","references","before","push","params","args","context","info","type","events","QUERY","result","targetBefore","findOptions","rootValue","where","length","results","reduce","promise","curr","then","prev","Promise","resolve","targetAfter","forEach","fk","assoc","associations","assocName","foreignKey","targetName","target","name","edges","e","globalId","node","get","set","$polluted","data","undefined","x","targetAfterArray","map","afterList"],"mappings":"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","file":"create-before-after.js","sourceRoot":"../../../src/"}