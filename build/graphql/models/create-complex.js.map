{"version":3,"sources":["graphql/models/create-complex.js"],"names":["createComplexModels","models","keys","typeCollection","mutationFunctions","options","Promise","all","map","modelName","relationships","fields","_typeConfig","Object","relName","relationship","targetType","source","mutationFunction","permission","result","before","after","afterList","type","manyArgs","version","compat","assign","returnActionResults","args","resolve","context","info","create","update","delete","model","assoc","associations","funcs","foreignKey","get","sourceKey","createResult","reduce","promise","a","then","arr","concat","input","updateResult","deleteResult","rel","forEach","modelDefinition","expose","instanceMethods","query","methodName","methodDefinition","String","queryInstanceMethods","apply"],"mappings":"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","file":"create-complex.js","sourceRoot":"../../../src/"}