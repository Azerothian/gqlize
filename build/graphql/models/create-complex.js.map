{"version":3,"sources":["graphql/models/create-complex.js"],"names":["models","keys","typeCollection","mutationFunctions","options","Promise","all","map","modelName","relationships","fields","_typeConfig","Object","relName","relationship","targetType","source","mutationFunction","permission","result","before","after","afterList","type","manyArgs","version","compat","assign","returnActionResults","args","resolve","context","info","create","update","delete","model","assoc","associations","funcs","foreignKey","get","sourceKey","createResult","reduce","promise","a","then","arr","concat","input","updateResult","deleteResult","rel","forEach","modelDefinition","expose","instanceMethods","query","methodName","methodDefinition","String","queryInstanceMethods","apply","createComplexModels"],"mappings":"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","file":"create-complex.js","sourceRoot":"../../../src/"}