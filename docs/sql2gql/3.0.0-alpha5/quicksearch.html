<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Global connectcreateBeforeAftercreateComplexModelscreateFunctionscreateModelListscreateModelTypescreateMutationFunctionscreateMutationInputscreateMutationV3createQueryFunctionscreateRoleBasedPermissionscreateSchemacreateSubscriptionFunctionscreateSubscriptionHookgraphqlExpressloadSchemas Global Methods connect(schemas, sqlInstance, options) Parameters: Name Type Description schemas Array.&lt;Object&gt; sqlInstance Object options Object Returns: Type Object createBeforeAfter(model, options, hooks) Parameters: Name Type Description model Object options Object hooks Object Returns: Type CreateBeforeAfterOutput createComplexModels(models, keys, typeCollection, mutationFunctions, options) Parameters: Name Type Description models Object keys Array.&lt;string&gt; typeCollection Object mutationFunctions Object options Object Returns: Type Object createFunctions(models, keys, typeCollection, mutationInputTypes, options) Parameters: Name Type Description models Object keys Array.&lt;string&gt; typeCollection Object mutationInputTypes Object options Object Returns: Type Object createModelLists(models, modelNames, typeCollection, options, fields) Parameters: Name Type Description models Object modelNames Array.&lt;string&gt; typeCollection Object options Object fields Object Returns: Type Object createModelTypes(models, keys, prefix, options, nodeInterface) Parameters: Name Type Description models Object keys Array.&lt;string&gt; prefix string options Object nodeInterface Object Returns: Type Object createMutationFunctions(models, keys, typeCollection, options) Parameters: Name Type Description models Object keys Array.&lt;string&gt; typeCollection Object options Object Returns: Type Object createMutationInputs(models, keys, typeCollection, options) Parameters: Name Type Description models Object keys Array.&lt;string&gt; typeCollection Object options Object Returns: Type Object createMutationV3(models, keys, typeCollection, mutationFunctions, options) Parameters: Name Type Description models Object keys Array.&lt;string&gt; typeCollection Object mutationFunctions Array.&lt;function()&gt; options Object Returns: Type Object createQueryFunctions(models, keys, typeCollection, options) Parameters: Name Type Description models Object keys Array.&lt;string&gt; typeCollection Object options Object Returns: Type Object createRoleBasedPermissions(role, rules, options) Parameters: Name Type Description role string rules Object options Object Returns: Type GraphQLSchema createSchema(sqlInstance, options) Parameters: Name Type Description sqlInstance Object options Object Returns: Type GraphQLSchema createSubscriptionFunctions(pubsub, models, keys, typeCollection, options, options) Parameters: Name Type Description pubsub Object models Object keys Array.&lt;string&gt; typeCollection Object options Object options Object Returns: Type Object createSubscriptionHook(schema, hookName, subscriptionName, pubsub, schemaOptions) Parameters: Name Type Description schema Object hookName string subscriptionName string pubsub Object schemaOptions Object Returns: Type function graphqlExpress(options) Parameters: Name Type Description options Object loadSchemas(schemas, sqlInstance, options) Parameters: Name Type Description schemas Array.&lt;Object&gt; sqlInstance Object options Object Type Definitions CreateBeforeAfterOutput Type: Object Properties: Name Type Description before function after function afterList Array.&lt;function()&gt; Ã— Search results Close Documentation generated by JSDoc 3.5.5 on May 8th 2018, 1:40:13 pm using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Global connectcreateBeforeAftercreateComplexModelscreateFunctionscreateModelListscreateModelTypescreateMutationFunctionscreateMutationInputscreateMutationV3createQueryFunctionscreateRoleBasedPermissionscreateSchemacreateSubscriptionFunctionscreateSubscriptionHookgraphqlExpressloadSchemas sql2gql 3.0.0-alpha5 sql2gqlOpininated Sequelize to GraphQL bridge, extending out graphql-sequelize with dynamically exposing relationships and functions via queries and mutations. We rely heavily on the Sequelize API for definition of the model classes. Requirements NodeJs &gt;= 4 Sequelize v3/v4 graphql graphql-sequelize Features Dynamic mapping of sequelize models and relationships to graphql for query and mutation. Exposing classMethods as mutation/query options. Permissions to restrict access to parts of the graphql schema on generation. Generation of subscriptions from sequelize hooks APIModelThe model object is the bread and butter of the setup, it basically serves two purposes, creating the data model in sequelize and the graphql model. Key type Description name String(sequelize.define.modelName)) Model name define Object(sequelize.define.attributes) Model fields options Object(sequelize.define.options) Model sequelize.define options relationships Array[Model.Relationship] Model relationships expose Object(Model.Expose) this is used to make classMethods/instanceMethods available via queries or mutations in graphql classMethods Object static typed functions that are set on the model under sequelize (for v3 this will be copied into options instead) instanceMethods Object functions that are set on the model's prototype under sequelize (for v3 this will be copied into options instead) ignoreFields Array[String] TODO before ({params, args, context, info, type}) =&gt; return params This function is executed before graphql-sequelize resolver is tasked, you must return the params for it to be able to continue after ({result, args, context, info, type}) =&gt; return result This function is executed after graphql-sequelize resolver has completed but before the result is passed up to graphql for queries, , , type determines ns override HashObject[fieldName -&gt; Model.override] overrides the field resolver functions to allow for complex types on on simple fields e.g. JSON,JSONB resolver () =&gt; Object the replaces graphql-sequelize resolver completely subscriptions HashObject[hookName -&gt; (instance, args, req, gql) =&gt; {return instance}] overrides default action of subscription hook event, this occurs after all sequelize hooks and must return a model. Model.Override Key type Description type {name: String, fields: GraphQLFieldConfigMap} GraphQLObject definition output (result, args, context, info) =&gt; fieldData This function processes outgoing data for the the field, the result is the parent model. output (field, args, context, info) =&gt; fieldData This function processes incoming data for the the field, the field param is the input argument set for the field. Model.Expose Key type Description classMethods Object({query: Model.Expose.Definition, mutation: Model.Expose.Definition}) Object containing the graphql definition of classMethods you wish to expose on either query or mutation instanceMethods Object({query: Model.Expose.Definition}) Object containing the graphql definition of instanceMethods you wish to expose as a field query Model.Expose.DefinitionThis object is a HashObject which the key must match the function name targeted. Key type Description type String or GraphQLObjectType If this is a string it will use the models generated graphql type (use &quot;List\\&quot; for lists) as the return value, other wise if it is GraphQLObjectType it will use this instead args Key value hash object that require GraphQLInputObjectType Model.Relationship Key type Description name String Relationship field name for model type String(sequelize.association) Executes the association function on the model. model String(Model.name) target model of the association options Object(sequelize.association.options) The available options depends on the type of association you pick connectThis creates sequelize models and injects appropriate metadata for the createSchema function import {connect} from &quot;sql2gql&quot;; Parameter Description Array(Model) Array of models Sequelize.instance Sequelize connection instance createSchemaGenerates a graphql schema from the metadata stored in the sequelize instance. import {createSchema} from &quot;sql2gql&quot;; Parameter Description Sequelize.connection Sequelize connection instance Object(createSchema.options) createSchema options createSchema.optionsGenerates a graphql schema from the metadata stored in the sequelize instance. Returns Object(GraphQLSchema) Key type Description name String Relationship field name for model permissions Object(createSchema.options.permissions) optional hooks to constrain visibility of fields and functions query Object(GraphQLSchema) merges into base RootQuery field via Object.assign mutation Object(GraphQLSchema) merges into base Mutation field via Object.assign before (model: Model, findOptions, args, context, info) =&gt; return findOptions after (model: Model, result, args, context, info) =&gt; return result subscriptions Object[createSchema.options.subscriptions] config options for the subscriptions createSchema.options.subscriptions Key type Description hookNames [String] list of hooks that will be registered per model, please see Sequelize.Hooks for the full list of available. [&quot;afterCreate&quot;, &quot;afterDestroy&quot;, &quot;afterUpdate&quot;] are the default settings. Currently only (instance, options) typed hooks are automatically support as each subscription is configured to return the type of the model it is for. pubsub PubSub pubsub is required for handling events between sequelize and the graphql instance. Please see GraphQL Subscriptions for more information createSchema.options.permissionshooks to constrain visibility of fields and functions will only hide elements by default if hook is defined, Key type Description model (modelName: String) =&gt; Boolean False ensures the model itself is no where available across the entire schema field (modelName: String, fieldName: String) =&gt; Boolean False ensures model field &quot;query {model {modelName {fieldName}}}&quot; is unavailable relationship (modelName: String,relationshipName: String, targetModelName: String) =&gt; Boolean False ensures model field option &quot;modelName {relationshipName}&quot; is unavailable query (modelName: String) =&gt; Boolean False ensures query option &quot;query {model {modelName}}&quot; is unavailable queryClassMethods (modelName: String, methodName: String) =&gt; Boolean False ensures query option &quot;query {classMethods {modelName {methodName}}}&quot; is unavailable queryInstanceMethods (modelName: String, methodName: String) =&gt; Boolean False ensures query option &quot;query {classMethods {modelName {methodName}}}&quot; is unavailable mutation (modelName) =&gt; Boolean False ensures mutation option &quot;mutation {models {modelName}}&quot; is unavailable mutationUpdate (modelName) =&gt; Boolean False ensures mutation option &quot;mutation {models {modelName{update}}}&quot; is unavailable mutationCreate (modelName) =&gt; Boolean False ensures mutation option &quot;mutation {models {modelName{create}}}&quot; is unavailable mutationDelete (modelName) =&gt; Boolean False ensures mutation option &quot;mutation {models {modelName{delete}}}&quot; is unavailable mutationClassMethods (modelName: String, methodName: String) =&gt; Boolean False ensures mutation option &quot;mutation {classMethods {modelName {methodName}}}&quot; is unavailable subscription (modelName, hookName) =&gt; Boolean False ensures mutation option &quot;subscription { `{$hookName}${modelName}`{ id } }&quot; is unavailable GraphqlSchemagraphql-sequlize helpers Queryquery { models { modelName(defaultListArgs): GraphQLList&lt;Model&gt; { field relationship(args) { field } } } classMethods { modelName { functionName(params) { {definedModel} } } } }Mutationmutation { models { modelName { create(input: modelDefinition) { field } update(where: SequelizeJSONType, input: modelDefinition) { field } classMethod(params) { field } } } }SubscriptionReference subscription X { afterCreateTask { id, name } afterUpdateTask { id, name } }ExampleGithub Repo import Sequelize from &quot;sequelize&quot;; import {connect, createSchema} from &quot;sql2gql&quot;; import expect from &quot;expect&quot;; import { graphql, GraphQLString, GraphQLNonNull, GraphQLInputObjectType, GraphQLObjectType, GraphQLInt, } from &quot;graphql&quot;; const TaskModel = { name: &quot;Task&quot;, define: { name: { type: Sequelize.STRING, allowNull: false, validate: { isAlphanumeric: { msg: &quot;Your task name can only use letters and numbers&quot;, }, len: { args: [1, 50], msg: &quot;Your task name must be between 1 and 50 characters&quot;, }, }, }, options: { type: Sequelize.STRING, allowNull: true, }, }, before(findOptions, args, context, info) { return findOptions; }, after(result, args, context, info) { return result; }, override: { options: { type: { name: &quot;TaskOptions&quot;, fields: { hidden: {type: GraphQLString}, }, }, output(result, args, context, info) { return JSON.parse(result.get(&quot;options&quot;)); }, input(field, args, context, info) { return JSON.stringify(field); }, }, }, relationships: [{ type: &quot;hasMany&quot;, model: &quot;TaskItem&quot;, name: &quot;items&quot;, }], expose: { classMethods: { mutations: { reverseName: { type: &quot;Task&quot;, args: { input: { type: new GraphQLNonNull(new GraphQLInputObjectType({ name: &quot;TaskReverseNameInput&quot;, fields: { amount: {type: new GraphQLNonNull(GraphQLInt)}, }, })), }, }, }, }, query: { getHiddenData: { type: new GraphQLObjectType({ name: &quot;TaskHiddenData&quot;, fields: () =&gt; ({ hidden: {type: GraphQLString}, }), }), args: {}, }, getHiddenData2: { type: new GraphQLObjectType({ name: &quot;TaskHiddenData2&quot;, fields: () =&gt; ({ hidden: {type: GraphQLString}, }), }), args: {}, }, }, }, }, options: { tableName: &quot;tasks&quot;, classMethods: { reverseName({input: {amount}}, context) { return { id: 1, name: `reverseName${amount}`, }; }, getHiddenData(args, context) { return { hidden: &quot;Hi&quot;, }; }, getHiddenData2(args, context) { return { hidden: &quot;Hi2&quot;, }; }, }, hooks: { beforeFind(options) { return undefined; }, beforeCreate(instance, options) { return undefined; }, beforeUpdate(instance, options) { return undefined; }, beforeDestroy(instance, options) { return undefined; }, }, indexes: [ // {unique: true, fields: [&quot;name&quot;]}, ], //instanceMethods: {}, //TODO: figure out a way to expose this on graphql }, }; const schemas = [TaskModel]; (async() =&gt; { let instance = new Sequelize(&quot;database&quot;, &quot;username&quot;, &quot;password&quot;, { dialect: &quot;sqlite&quot;, logging: false }); connect(schemas, instance, {}); // this populates the sequelize instance with the appropriate models and referential information for schema generation await instance.sync(); const schema = await createSchema(instance); //creates graphql schema const mutation = `mutation { models { Task { create(input: {name: &quot;item1&quot;, options: {hidden: &quot;nowhere&quot;}}) { id, name options { hidden } } } } }`; // create item in database const mutationResult = await graphql(schema, mutation); expect(mutationResult.data.models.Task.create.options.hidden).toEqual(&quot;nowhere&quot;); const queryResult = await graphql(schema, &quot;query { models { Task { id, name, options {hidden} } } }&quot;); // retrieves information from database return expect(queryResult.data.models.Task[0].options.hidden).toEqual(&quot;nowhere&quot;); })();Permission HelperThe is a simple role base helper for hooking into the permission events for deny and allowing sections during schema generation based on roles provided. /* options = { defaultDeny: true defaults: { } } defaultPerm = { &quot;fields&quot;: { &quot;Task&quot;: { &quot;options&quot;: &quot;deny&quot;, }, }, &quot;classMethods&quot;: { &quot;User&quot;: { &quot;login&quot;: &quot;allow&quot;, &quot;logout&quot;: &quot;allow&quot;, }, }, }; rules = { &quot;admin&quot;: { &quot;field&quot;: { &quot;User&quot;: &quot;allow&quot;, } &quot;model&quot;: &quot;allow&quot;, &quot;classMethods&quot;: { &quot;User&quot;: { &quot;login&quot;: &quot;deny&quot;, }, }, }, &quot;user&quot;: { &quot;mutation&quot;: &quot;deny&quot;, }, }; */ const ruleSet = { &quot;someone&quot;: &quot;deny&quot;, &quot;anyone&quot;: { &quot;query&quot;: &quot;allow&quot;, &quot;model&quot;: { &quot;Task&quot;: &quot;allow&quot;, }, &quot;field&quot;: { &quot;Task&quot;: { &quot;name&quot;: &quot;allow&quot;, }, }, }, }; const anyoneSchema = await createSchema(instance, { permission: permissionHelper(&quot;anyone&quot;, ruleSet) }); const someoneSchema = await createSchema(instance, { permission: permissionHelper(&quot;someone&quot;, ruleSet) });ChangeLog1.1.0 delete mutations now return object that it has deleted instead of boolean - [Breaking change from 1.0.0] subscriptions are now supported, defaults will hook into afterCreate, afterUpdate, afterDestroy on the sequelize models added extend to options in createScheme for supporting unknown/future root variables set all functions to export to allow for anyone wanting to use the api directly 1.2.0 changed before and after hooks on the model definition to include mutations, the arguments have been reduced to a single object - [Breaking change from 1.1.0] 1.2.1 fixed before, after hooks arguments for mutations 1.2.2 adding rootValue and context to the findOptions statement provided to sequelize. accessible from the hook beforeFind. updated base model before after hooks. 1.2.4 updated override to allow scalar and enum types to be set as the field type directly 1.2.5 added Instance Methods to the query field definition if exposed. 1.2.6 exposed generated types via $sql2gql.types on the schema returned from connect 1.2.7 Added field permission option 2.0.0 Added subscription permission option added a simple role based permission helper fixed field permissions return value to be correct removed some let over debugging mechanics from 1.2.7 updated package dependencies switch to the official graphql subscriptions mechanic in the test cases updated all the tests to match the jest version of expect implemented a basic role based permission helper. added checks for over aggressive permission handling added the default fields to the permission check dropping node support for anything lesser then current LTS aka compile target is currently v6.11.3 2.0.1 total overcomplicated implementation for field filtering in permissions - now fixed. added a new permissions test 2.0.2 added list types for all available models for instanceMethods, classMethods and schema.$sql2gql.types. format is &quot;List&lt;${modelName}&gt;&quot; 2.1.0 BUGFIX #21 - Unable to use list types in for instanceMethods [Breaking Change] switch formatting from List to Object[] to be more consistent with javascript syntax 2.1.1 Added model to parameters of override.input on updates 3.0.0-alpha Rebuilt mutation crud to allow for related objects to be created at the same time Allowed query class methods to be allowed without models that they are created upon Ã— Search results Close Documentation generated by JSDoc 3.5.5 on May 8th 2018, 1:40:13 pm using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
